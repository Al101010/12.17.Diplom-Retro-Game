<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>12.17-dz</title>
    <!-- <script src="slow.js"></script> -->
</head>
<body>
    <h1>12.17 ДЗ - Team</h1>
    
    <script>
class Character {
    constructor(level = 1, type = 'generic') {
        this.level = level;
        this.attack = 0;
        this.defence = 0;
        this.health = 50;
        this.type = type;
        
        if (new.target.name === 'Character') {
            throw new Error('исключение - запрещено использовать new Character()')
        }
    }
}

console.log('--------------------------- ooops -1---------------------------------');
class Bowman extends Character {
    constructor(level, type = 'Bowman') {
        super(level, type);
        if (type === 'Bowman') {
            this.type = type;
            this.attack = 25;
            this.defence = 25;
        } else {
            throw new Error('исключение - неправильный ТИП')
        }
    }
}

class Swordsman extends Character {
    constructor(level, type = 'Swordsman') {
        super(level, type);
        if (type === 'Swordsman') {
            this.type = type;
            this.attack = 40;
            this.defence = 10;
        } else {
            throw new Error('исключение - неправильный ТИП')
        }
    }
}

class Magician extends Character {
    constructor(level, type = 'Magician') {
        super(level, type);
        if (type === 'Magician') {
            this.type = type;
            this.attack = 10;
            this.defence = 10;
        } else {
            throw new Error('исключение - неправильный ТИП')
        }
    }
}
// const bowman = new Bowman();
// console.log(bowman);
// const swordsman = new Swordsman();
// console.log(bowman);
// const magician = new Magician();
// console.log(magician);
console.log('--------------------------- ooops ----------------------------------');
function* characterGenerator(allowedTypes, maxLevel) {
  // TODO: write logic here

  // // случайное число от min до (max+1)
  // let random = min + Math.random() * (max + 1 - min);
  //  Math.floor((1 + Math.random() * 3)); // - случайное число от 1 до 3

  const levelCharacter = Math.floor(1 + (Math.random() * maxLevel));

  while (true) {
    yield new allowedTypes[Math.floor(Math.random() * (maxLevel + 1))](levelCharacter);
  }
}
console.log('--------------------------- ooops ----------------------------------');

const characters = [new Swordsman(2), new Bowman(3)];

// class Team {
//   // TODO: write your logic here
//   constructor() {
//     this.characters = [];
//   }
// //   const new .forEach((item) =>
// }

class Team {
    constructor(team) {
    this.characters = [];
    
    team.forEach((item) => this.characters.push(item));
  }

  #typesOfPlayersCharacters = [Bowman, Swordsman, Magician];
  #typesOfComputerCharacters = [Bowman, Swordsman, Magician];

  beginningGame() {
    this.characters = [];
    this.characters = generateTeam(this.#typesOfPlayersCharacters, 3, 3)
  }


//   playerStartTeam() {
//     this.characters = generateTeam(this.#allowedTypesPlayerStart, 1, 1, 2);
//   }  
}

function generateTeam(allowedTypes, maxLevel, characterCount) {
  // TODO: write logic here
  const team = [];
  const character = characterGenerator(allowedTypes, maxLevel, characterCount);
  
  for (let i = 0; characterCount > i; i++) {
    team.push(character.next().value);
  }
  
  return team;
}


const team = new Team(characters);
console.log(team);
console.log(team.characters);
    </script>
</body>
</html>